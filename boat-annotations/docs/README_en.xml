<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="3"?>
<?asciidoc-numbered?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
<info>
<title><inlinemediaobject>
<imageobject>
<imagedata fileref="../../logo.svg"/>
</imageobject>
<textobject><phrase>Boat Annotations</phrase></textobject>
</inlinemediaobject> <literal>boat-annotations</literal></title>
<subtitle>Boat Annotations&#8201;&#8212;&#8201;Annotations of <link xl:href="../../README.md">Boat</link></subtitle>
<date>2021-07-05</date>
<author>
<personname>
<firstname>Sun</firstname>
<surname>Qian</surname>
</personname>
<email>fredsuvn@163.com</email>
</author>
<authorinitials>SQ</authorinitials>
</info>
<simpara>Boat Annotations provides a set of annotations to make codes clear and clean:</simpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">DefaultNonNull</emphasis>/<emphasis role="strong">DefaultNullable</emphasis>: It tells that all variables, fields, parameters, and other use of type are non-null/nullable by default in annotated scope, usually used in package-info.java;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">NotNull</emphasis>/<emphasis role="strong">Nullable</emphasis>: It tells that annotated variable, field, parameter, and other use of type is non-null/nullable;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">JavaBean</emphasis>: It tells that annotated type is a java-bean, which all properties are nullable by default;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">Acceptable</emphasis>/<emphasis role="strong">Accepted</emphasis>: It tells that annotated parameter only accepts specified types;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">Rejectable</emphasis>/<emphasis role="strong">Rejected</emphasis>: It tells that annotated parameter will reject specified types;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">Written</emphasis>: It tells that the parameter may be written;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">Immutable</emphasis>: It tells that annotated variable, field, parameter, and other use of type is immutable and thread-safe;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">ThreadSafe</emphasis>: It tells that annotated variable, field, parameter, and other use of type is thread-safe;</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">ThreadSafeIf</emphasis>: It tells that annotated variable, field, parameter, and other use of type is thread-safe if specified conditions were met;</simpara>
</listitem>
</itemizedlist>
<formalpara>
<title>Java Examples</title>
<para>
<programlisting language="java" linenumbering="unnumbered">package sample.java.xyz.srclab.annotations;

import org.testng.Assert;
import org.testng.annotations.Test;
import xyz.srclab.annotations.Accepted;
import xyz.srclab.annotations.JavaBean;
import xyz.srclab.annotations.NonNull;
import xyz.srclab.annotations.Written;

public class AnnotationSample {

    @Test
    public void testAnnotations() {
        TestBean testBean = new TestBean();
        Assert.assertEquals(testBean.getP2().substring(1), "2");
        Assert.expectThrows(NullPointerException.class, () -&gt; testBean.getP1().substring(1));

        StringBuilder buffer = new StringBuilder();
        writeBuffer(buffer, "123");
        Assert.assertEquals(buffer.toString(), "123");
    }

    private void writeBuffer(
        @Written StringBuilder buffer,
        @Accepted(String.class) @Accepted(StringBuffer.class) CharSequence readOnly
    ) {
        buffer.append(readOnly);
    }

    @JavaBean
    public static class TestBean {

        private String p1;
        @NonNull
        private String p2 = "p2";

        public String getP1() {
            return p1;
        }

        public void setP1(String p1) {
            this.p1 = p1;
        }

        @NonNull
        public String getP2() {
            return p2;
        }

        public void setP2(@NonNull String p2) {
            this.p2 = p2;
        }
    }
}</programlisting>
</para>
</formalpara>
<formalpara>
<title>Kotlin Examples</title>
<para>
<programlisting language="kotlin" linenumbering="unnumbered">package sample.kotlin.xyz.srclab.annotations

import org.testng.Assert
import org.testng.annotations.Test
import xyz.srclab.annotations.Acceptable
import xyz.srclab.annotations.Accepted
import xyz.srclab.annotations.Written

class AnnotationSample {

    @Test
    fun testAnnotations() {
        val buffer = StringBuilder()
        buffer.writeBuffer("123")
        Assert.assertEquals(buffer.toString(), "123")
    }

    private fun @receiver:Written StringBuilder.writeBuffer(
        @Acceptable(
            Accepted(String::class),
            Accepted(StringBuffer::class),
        )
        readOnly: String
    ) {
        this.append(readOnly)
    }
}</programlisting>
</para>
</formalpara>
</article>